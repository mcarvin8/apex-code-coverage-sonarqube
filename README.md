## Apex Code Coverage into SonarQube from a Salesforce Validation

*NOTICE*: This has been converted to a Salesforce CLI plugin and will be maintained here - https://github.com/mcarvin8/apex-code-coverage-transformer

The JSON file created by the `sf project deploy validate` command isn't accepted by SonarQube automatically.

The JSON file needs to be convered to the Generic Test Coverage Format (https://docs.sonarsource.com/sonarqube/9.8/analyzing-source-code/test-coverage/generic-test-data/#:~:text=Generic%20test%20coverage%20report%20format,-Report%20paths%20should&text=Insert%20a%20file%20element%20for,be%20covered%20by%20unit%20tests.).

This Python 3 script will convert the JSON into an XML accepted by SonarQube for Apex Code Scans.

The script will only add Uncovered Lines generated by the Salesforce CLI validate command.

`sf project deploy validate -x manifest/package.xml -l RunSpecifiedTests -t {testclasses} --verbose --coverage-formatters json --results-dir coverage`

Since Salesforce Validations with RunSpecifiedTests enforces 75% code coverage, this script only needs to handle code which meets code coverage requirements. This has been tested and confirmed on code which meets 100% code coverage.

This script assumes it's running in a project following the Salesforce DX project structure (`force-app`).
